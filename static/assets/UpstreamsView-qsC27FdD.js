import{c as o,a as t,o as n,d as be,j as _e,f as h,l as L,g as p,m as _,t as u,b as f,n as M,e as m,F as Q,s as W,w as X,h as y,v as j,A as we,C as R,T as Y,D as P,E as ee}from"./index-DhpxW4Ja.js";import{r as te}from"./ArrowPathIcon-DtyxeBar.js";import{r as J,a as se}from"./PlusIcon-oyCLo3NR.js";import{r as ke}from"./ChevronRightIcon-s1Lh20XL.js";import{r as je}from"./ExclamationTriangleIcon-BM88Up9p.js";import{r as ae}from"./TrashIcon-DcQiT53S.js";function Ce($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})])}function Pe($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ue($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function Me($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function $e($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}function le($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"})])}function Ae($,b){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Ve={class:"p-8"},De={class:"mb-8 flex items-center justify-between"},Ee={key:0,class:"mt-1 text-xs text-blue-600"},Fe={class:"font-mono bg-blue-50 px-1 rounded"},Se={class:"flex items-center gap-3"},qe=["disabled"],Be={key:0,class:"mb-6 rounded-md bg-red-50 p-4"},Ne={class:"text-sm text-red-700"},He={key:1,class:"flex items-center justify-center h-64"},Te={key:2,class:"text-center py-12"},Le={class:"mt-6"},Re={key:3,class:"space-y-6"},Ze={class:"flex items-start justify-between mb-4"},ze={class:"flex items-center gap-3"},Oe={class:"font-semibold text-gray-900"},Ge={class:"text-xs text-gray-500 font-mono"},Ie={class:"space-y-2 text-sm"},Je={class:"flex items-center gap-2 text-gray-600"},Ke={class:"truncate"},Qe={key:0,class:"mt-3"},We=["onClick"],Xe={key:0,class:"flex items-center gap-1 text-xs text-amber-600",title:"No default project set - requests not matching any pattern may fail"},Ye={key:0,class:"mt-2 ml-6 space-y-2"},et={class:"flex items-center gap-3"},tt={class:"min-w-0"},st={class:"flex items-center gap-2"},at={class:"font-mono text-sm text-gray-800"},lt={key:0,class:"px-1.5 py-0.5 text-xs rounded bg-blue-100 text-blue-700"},nt={class:"text-xs text-gray-500"},rt={class:"ml-1 bg-gray-100 px-1 rounded"},ot={class:"ml-1"},it={class:"flex items-center gap-1"},dt=["onClick"],ut=["onClick"],ct=["onClick"],pt={key:1,class:"flex items-center gap-2"},mt={class:"font-mono text-gray-700"},vt={class:"flex items-center gap-2"},ft={class:"text-gray-700"},yt={class:"flex flex-wrap gap-2 mt-3"},xt={key:0,class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-700"},gt={class:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700"},ht={key:1,class:"px-2 py-0.5 text-xs rounded-full bg-purple-100 text-purple-700"},bt={class:"mt-4 pt-4 border-t flex justify-end gap-2"},_t=["onClick"],wt=["onClick"],kt={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},jt={class:"flex min-h-screen items-center justify-center p-4"},Ct={class:"relative bg-white rounded-lg shadow-xl max-w-lg w-full p-6"},Pt={class:"text-lg font-semibold mb-4"},Ut={key:0},Mt={class:"grid grid-cols-2 gap-4"},$t=["placeholder"],At=["placeholder"],Vt={class:"grid grid-cols-2 gap-4"},Dt={class:"flex flex-wrap gap-4"},Et={class:"flex items-center gap-2"},Ft={class:"flex items-center gap-2"},St={class:"flex items-center gap-2"},qt={class:"pt-4 border-t"},Bt=["disabled"],Nt={class:"flex justify-end gap-3 pt-4"},Ht={type:"submit",class:"btn btn-primary"},Tt={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Lt={class:"flex min-h-screen items-center justify-center p-4"},Rt={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},Zt={class:"text-lg font-semibold mb-4"},zt={key:0,class:"text-sm text-gray-500 mb-4"},Ot={class:"font-medium"},Gt={key:0,class:"mt-1 text-xs text-red-600"},It={key:1,class:"mt-1 text-xs text-gray-500"},Jt={key:0,class:"mt-1 text-xs text-red-600"},Kt={key:1,class:"mt-1 text-xs text-gray-500"},Qt={class:"flex items-center gap-2"},Wt={class:"flex justify-end gap-3 pt-4 border-t"},Xt=["disabled"],ns=be({__name:"UpstreamsView",setup($){const b=p([]),Z=p(new Map),F=p(!0),w=p(""),z=p(null),A=p(new Set),B=p(!1),U=p("create"),S=p(null),N=p(!1),V=p("create"),k=p(null),q=p(-1),v=p({}),l=p({name:"",display_name:"",url:"",registry:"",username:"",password:"",skip_tls_verify:!1,priority:100,enabled:!0,cache_isolation:"shared",is_default:!1,routes:[]}),c=p({name:"",pattern:null,priority:100,is_default:!1}),H=p(!1),C=p(null),T=p(!1);function ne(a){return!a||a.trim()===""?"Project name is required":a.length>256?"Project name exceeds maximum length of 256 characters":a.includes("..")?"Project name cannot contain path traversal sequences (..)":/^[a-zA-Z0-9]/.test(a)?/^[a-zA-Z0-9][a-zA-Z0-9._/-]*$/.test(a)?null:"Project name must contain only alphanumeric characters, dashes, underscores, dots, and forward slashes":"Project name must start with an alphanumeric character"}function re(a){if(!a)return null;if(a.length>512)return"Pattern exceeds maximum length of 512 characters";if(a.includes(".."))return"Pattern cannot contain path traversal sequences (..)";const e=(a.match(/\*/g)||[]).length;return e>10?`Pattern contains ${e} wildcards, maximum allowed is 10`:null}function oe(){v.value={};const a=ne(c.value.name);if(a&&(v.value.name=a),c.value.pattern){const e=re(c.value.pattern);e&&(v.value.pattern=e)}return k.value&&!v.value.name&&(k.value.projects||[]).some((d,r)=>d.name===c.value.name&&(V.value==="create"||r!==q.value))&&(v.value.name=`A project named '${c.value.name}' already exists in this upstream`),Object.keys(v.value).length===0}async function D(){var a,e,s,d;try{F.value=!0,w.value="";const r=await P.list();b.value=r.data;try{const i=await P.getAllHealth();Z.value=new Map(i.data.map(g=>[g.name,g]))}catch(i){console.error("Failed to fetch health status:",i)}try{const i=await P.getConfigPath();z.value=i.data.path}catch(i){console.error("Failed to fetch config path:",i)}}catch(r){w.value=((d=(s=(e=(a=r.response)==null?void 0:a.data)==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:d.message)||"Failed to fetch upstreams"}finally{F.value=!1}}function K(){U.value="create",S.value=null,l.value={name:"",display_name:"",url:"",registry:"",username:"",password:"",skip_tls_verify:!1,priority:100,enabled:!0,cache_isolation:"shared",is_default:!1,routes:[]},C.value=null,B.value=!0}function ie(a){U.value="edit",S.value=a,l.value={name:a.name,display_name:a.display_name,url:a.url,registry:a.registry,username:"",password:"",skip_tls_verify:a.skip_tls_verify,priority:a.priority,enabled:a.enabled,cache_isolation:a.cache_isolation,is_default:a.is_default,routes:[]},C.value=null,B.value=!0}function O(){B.value=!1,S.value=null,C.value=null}function de(a){A.value.has(a)?A.value.delete(a):A.value.add(a)}function ue(a){V.value="create",k.value=a,q.value=-1,c.value={name:"",pattern:null,priority:100,is_default:!1},v.value={},N.value=!0}function ce(a,e,s){V.value="edit",k.value=a,q.value=s,c.value={name:e.name,pattern:e.pattern||null,priority:e.priority,is_default:e.is_default},v.value={},N.value=!0}function G(){N.value=!1,k.value=null,q.value=-1,v.value={}}async function pe(){var a,e,s,d;H.value=!0,C.value=null;try{const r=await P.test({url:l.value.url,registry:l.value.registry,username:l.value.username||void 0,password:l.value.password||void 0,skip_tls_verify:l.value.skip_tls_verify});C.value=r.data}catch(r){C.value={success:!1,message:((d=(s=(e=(a=r.response)==null?void 0:a.data)==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:d.message)||"Test failed"}}finally{H.value=!1}}async function me(){var a,e,s,d;try{if(U.value==="create")await P.create(l.value);else if(S.value){const r={display_name:l.value.display_name,url:l.value.url,registry:l.value.registry,skip_tls_verify:l.value.skip_tls_verify,priority:l.value.priority,enabled:l.value.enabled,cache_isolation:l.value.cache_isolation,is_default:l.value.is_default};l.value.username&&(r.username=l.value.username),l.value.password&&(r.password=l.value.password),await P.update(S.value.name,r)}O(),D()}catch(r){w.value=((d=(s=(e=(a=r.response)==null?void 0:a.data)==null?void 0:e.errors)==null?void 0:s[0])==null?void 0:d.message)||"Failed to save upstream"}}async function ve(a){var e,s,d,r;if(confirm(`Are you sure you want to delete upstream "${a.display_name}"? This will update the config file.`))try{await P.delete(a.name),D()}catch(i){w.value=((r=(d=(s=(e=i.response)==null?void 0:e.data)==null?void 0:s.errors)==null?void 0:d[0])==null?void 0:r.message)||"Failed to delete upstream"}}async function fe(){var a,e,s,d,r;if(oe()&&k.value){T.value=!0,w.value="";try{const i=(k.value.projects||[]).map(x=>({name:x.name,pattern:x.pattern,priority:x.priority,is_default:x.is_default})),g={name:c.value.name.trim(),pattern:((a=c.value.pattern)==null?void 0:a.trim())||null,priority:c.value.priority,is_default:c.value.is_default};V.value==="create"?i.push(g):i[q.value]=g,g.is_default&&i.forEach((x,I)=>{x.name!==g.name&&(i[I]={...x,is_default:!1})});const E=k.value.name;await P.update(E,{projects:i}),G(),await D(),A.value.add(E)}catch(i){w.value=((r=(d=(s=(e=i.response)==null?void 0:e.data)==null?void 0:s.errors)==null?void 0:d[0])==null?void 0:r.message)||"Failed to save project"}finally{T.value=!1}}}async function ye(a,e){var d,r,i,g;const s=a.projects[e];if(confirm(`Are you sure you want to delete project "${s.name}" from upstream "${a.display_name}"?`)){w.value="";try{const E=a.projects.filter((x,I)=>I!==e).map(x=>({name:x.name,pattern:x.pattern,priority:x.priority,is_default:x.is_default}));await P.update(a.name,{projects:E}),await D(),A.value.add(a.name)}catch(E){w.value=((g=(i=(r=(d=E.response)==null?void 0:d.data)==null?void 0:r.errors)==null?void 0:i[0])==null?void 0:g.message)||"Failed to delete project"}}}function xe(a){const e=Z.value.get(a);return e?e.healthy?"text-green-500":"text-red-500":"text-gray-400"}function ge(a){var e;return((e=a.projects)==null?void 0:e.length)||0}function he(a){var e;return!a.uses_multi_project||!((e=a.projects)!=null&&e.length)?!1:!a.projects.some(s=>s.is_default)}return _e(D),(a,e)=>(n(),o("div",Ve,[t("div",De,[t("div",null,[e[16]||(e[16]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Upstreams",-1)),e[17]||(e[17]=t("p",{class:"mt-1 text-sm text-gray-500"},"Manage upstream Harbor registries",-1)),z.value?(n(),o("p",Ee,[e[15]||(e[15]=_(" Changes are persisted to: ",-1)),t("code",Fe,u(z.value),1)])):h("",!0)]),t("div",Se,[t("button",{onClick:D,disabled:F.value,class:"btn btn-secondary flex items-center gap-2"},[f(m(te),{class:M(["h-4 w-4",{"animate-spin":F.value}])},null,8,["class"]),e[18]||(e[18]=_(" Refresh ",-1))],8,qe),t("button",{onClick:K,class:"btn btn-primary flex items-center gap-2"},[f(m(J),{class:"h-4 w-4"}),e[19]||(e[19]=_(" Add Upstream ",-1))])])]),w.value?(n(),o("div",Be,[t("p",Ne,u(w.value),1)])):h("",!0),F.value&&b.value.length===0?(n(),o("div",He,[f(m(te),{class:"h-8 w-8 text-gray-400 animate-spin"})])):b.value.length===0?(n(),o("div",Te,[f(m(le),{class:"mx-auto h-12 w-12 text-gray-400"}),e[21]||(e[21]=t("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No upstreams",-1)),e[22]||(e[22]=t("p",{class:"mt-1 text-sm text-gray-500"},"Get started by adding an upstream Harbor registry.",-1)),t("div",Le,[t("button",{onClick:K,class:"btn btn-primary"},[f(m(J),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=_(" Add Upstream ",-1))])])])):(n(),o("div",Re,[(n(!0),o(Q,null,W(b.value,s=>{var d;return n(),o("div",{key:s.id,class:"card hover:shadow-lg transition-shadow"},[t("div",Ze,[t("div",ze,[t("div",{class:M(["p-2 rounded-lg",s.enabled?"bg-primary-100":"bg-gray-100"])},[f(m(le),{class:M(["h-6 w-6",s.enabled?"text-primary-600":"text-gray-400"])},null,8,["class"])],2),t("div",null,[t("h3",Oe,u(s.display_name),1),t("p",Ge,u(s.name),1)])]),(n(),L(ee((d=Z.value.get(s.name))!=null&&d.healthy?m(Pe):m(Ae)),{class:M(["h-5 w-5",xe(s.name)])},null,8,["class"]))]),t("div",Ie,[t("div",Je,[f(m($e),{class:"h-4 w-4"}),t("span",Ke,u(s.url),1)]),s.uses_multi_project?(n(),o("div",Qe,[t("button",{onClick:r=>de(s.name),class:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900"},[(n(),L(ee(A.value.has(s.name)?m(Ue):m(ke)),{class:"h-4 w-4"})),f(m(Me),{class:"h-4 w-4 text-blue-500"}),t("span",null,"Projects ("+u(ge(s))+")",1),e[24]||(e[24]=t("span",{class:"text-xs text-blue-600 font-medium"},"Multi-project mode",-1)),he(s)?(n(),o("span",Xe,[f(m(je),{class:"h-4 w-4"}),e[23]||(e[23]=_(" No default ",-1))])):h("",!0)],8,We),A.value.has(s.name)?(n(),o("div",Ye,[(n(!0),o(Q,null,W(s.projects,(r,i)=>(n(),o("div",{key:r.name,class:"flex items-center justify-between p-2 bg-gray-50 rounded-md"},[t("div",et,[t("div",tt,[t("div",st,[t("span",at,u(r.name),1),r.is_default?(n(),o("span",lt," Default ")):h("",!0)]),t("div",nt,[e[25]||(e[25]=t("span",{class:"font-medium"},"Pattern:",-1)),t("code",rt,u(r.effective_pattern),1),e[26]||(e[26]=t("span",{class:"ml-2 font-medium"},"Priority:",-1)),t("span",ot,u(r.priority),1)])])]),t("div",it,[t("button",{onClick:g=>ce(s,r,i),class:"p-1 text-gray-400 hover:text-gray-600",title:"Edit project"},[f(m(se),{class:"h-4 w-4"})],8,dt),t("button",{onClick:g=>ye(s,i),class:"p-1 text-gray-400 hover:text-red-600",title:"Delete project"},[f(m(ae),{class:"h-4 w-4"})],8,ut)])]))),128)),t("button",{onClick:r=>ue(s),class:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md w-full"},[f(m(J),{class:"h-4 w-4"}),e[27]||(e[27]=_(" Add Project ",-1))],8,ct)])):h("",!0)])):(n(),o("div",pt,[e[28]||(e[28]=t("span",{class:"text-gray-500"},"Registry:",-1)),t("span",mt,u(s.registry),1)])),t("div",vt,[e[29]||(e[29]=t("span",{class:"text-gray-500"},"Priority:",-1)),t("span",ft,u(s.priority),1)]),t("div",yt,[s.is_default?(n(),o("span",xt," Default ")):h("",!0),t("span",{class:M([s.enabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500","px-2 py-0.5 text-xs rounded-full"])},u(s.enabled?"Enabled":"Disabled"),3),t("span",gt,u(s.cache_isolation),1),s.has_credentials?(n(),o("span",ht," Auth ")):h("",!0)])]),t("div",bt,[t("button",{onClick:r=>ie(s),class:"btn btn-secondary btn-sm flex items-center gap-1"},[f(m(se),{class:"h-4 w-4"}),e[30]||(e[30]=_(" Edit ",-1))],8,_t),t("button",{onClick:r=>ve(s),class:"btn btn-danger btn-sm flex items-center gap-1"},[f(m(ae),{class:"h-4 w-4"}),e[31]||(e[31]=_(" Delete ",-1))],8,wt)])])}),128))])),(n(),L(Y,{to:"body"},[B.value?(n(),o("div",kt,[t("div",jt,[t("div",{class:"fixed inset-0 bg-black/50",onClick:O}),t("div",Ct,[t("h2",Pt,u(U.value==="create"?"Add Upstream":"Edit Upstream"),1),t("form",{onSubmit:X(me,["prevent"]),class:"space-y-4"},[U.value==="create"?(n(),o("div",Ut,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.name=s),type:"text",required:"",class:"input mt-1",placeholder:"my-harbor"},null,512),[[j,l.value.name]]),e[33]||(e[33]=t("p",{class:"mt-1 text-xs text-gray-500"},"Unique identifier (alphanumeric, dashes, underscores)",-1))])):h("",!0),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700"},"Display Name",-1)),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.display_name=s),type:"text",required:"",class:"input mt-1",placeholder:"My Harbor Registry"},null,512),[[j,l.value.display_name]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700"},"URL",-1)),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.url=s),type:"url",required:"",class:"input mt-1",placeholder:"https://harbor.example.com"},null,512),[[j,l.value.url]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700"},"Registry/Project",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.registry=s),type:"text",required:"",class:"input mt-1",placeholder:"library"},null,512),[[j,l.value.registry]])]),t("div",Mt,[t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700"},"Username",-1)),y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.username=s),type:"text",class:"input mt-1",placeholder:U.value==="edit"?"(unchanged)":"Optional"},null,8,$t),[[j,l.value.username]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password",-1)),y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.password=s),type:"password",class:"input mt-1",placeholder:U.value==="edit"?"(unchanged)":"Optional"},null,8,At),[[j,l.value.password]])])]),t("div",Vt,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700"},"Priority",-1)),y(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.priority=s),type:"number",class:"input mt-1",min:"0"},null,512),[[j,l.value.priority,void 0,{number:!0}]]),e[40]||(e[40]=t("p",{class:"mt-1 text-xs text-gray-500"},"Lower = higher priority",-1))]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700"},"Cache Isolation",-1)),y(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.cache_isolation=s),class:"input mt-1"},[...e[41]||(e[41]=[t("option",{value:"shared"},"Shared",-1),t("option",{value:"isolated"},"Isolated",-1)])],512),[[we,l.value.cache_isolation]])])]),t("div",Dt,[t("label",Et,[y(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.enabled=s),type:"checkbox",class:"rounded"},null,512),[[R,l.value.enabled]]),e[43]||(e[43]=t("span",{class:"text-sm text-gray-700"},"Enabled",-1))]),t("label",Ft,[y(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.is_default=s),type:"checkbox",class:"rounded"},null,512),[[R,l.value.is_default]]),e[44]||(e[44]=t("span",{class:"text-sm text-gray-700"},"Default upstream",-1))]),t("label",St,[y(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.skip_tls_verify=s),type:"checkbox",class:"rounded"},null,512),[[R,l.value.skip_tls_verify]]),e[45]||(e[45]=t("span",{class:"text-sm text-gray-700"},"Skip TLS verify",-1))])]),t("div",qt,[t("button",{type:"button",onClick:pe,disabled:H.value||!l.value.url||!l.value.registry,class:"btn btn-secondary flex items-center gap-2"},[f(m(Ce),{class:"h-4 w-4"}),_(" "+u(H.value?"Testing...":"Test Connection"),1)],8,Bt),C.value?(n(),o("div",{key:0,class:M(["mt-2 p-2 rounded text-sm",C.value.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"])},u(C.value.message),3)):h("",!0)]),t("div",Nt,[t("button",{type:"button",onClick:O,class:"btn btn-secondary"}," Cancel "),t("button",Ht,u(U.value==="create"?"Create":"Save"),1)])],32)])])])):h("",!0)])),(n(),L(Y,{to:"body"},[N.value?(n(),o("div",Tt,[t("div",Lt,[t("div",{class:"fixed inset-0 bg-black/50",onClick:G}),t("div",Rt,[t("h2",Zt,u(V.value==="create"?"Add Project":"Edit Project"),1),k.value?(n(),o("p",zt,[e[46]||(e[46]=_(" Upstream: ",-1)),t("span",Ot,u(k.value.display_name),1)])):h("",!0),t("form",{onSubmit:X(fe,["prevent"]),class:"space-y-4"},[t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700"},[_(" Project Name "),t("span",{class:"text-red-500"},"*")],-1)),y(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>c.value.name=s),type:"text",required:"",class:M(["input mt-1",{"border-red-500":v.value.name}]),placeholder:"library"},null,2),[[j,c.value.name]]),v.value.name?(n(),o("p",Gt,u(v.value.name),1)):(n(),o("p",It," The project/registry name in Harbor (e.g., library, team-a) "))]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700"},"Pattern",-1)),y(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>c.value.pattern=s),type:"text",class:M(["input mt-1",{"border-red-500":v.value.pattern}]),placeholder:"library/* or team-a/**"},null,2),[[j,c.value.pattern]]),v.value.pattern?(n(),o("p",Jt,u(v.value.pattern),1)):(n(),o("p",Kt," Glob pattern to match repository paths. Use * for single segment, ** for multiple. Default: {name}/* "))]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700"},"Priority",-1)),y(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>c.value.priority=s),type:"number",class:"input mt-1",min:"0"},null,512),[[j,c.value.priority,void 0,{number:!0}]]),e[50]||(e[50]=t("p",{class:"mt-1 text-xs text-gray-500"}," Lower number = higher priority. Used when multiple patterns match. ",-1))]),t("div",null,[t("label",Qt,[y(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>c.value.is_default=s),type:"checkbox",class:"rounded"},null,512),[[R,c.value.is_default]]),e[51]||(e[51]=t("span",{class:"text-sm text-gray-700"},"Default project",-1))]),e[52]||(e[52]=t("p",{class:"mt-1 text-xs text-gray-500 ml-6"}," Used when no other project patterns match the request ",-1))]),t("div",Wt,[t("button",{type:"button",onClick:G,class:"btn btn-secondary"}," Cancel "),t("button",{type:"submit",class:"btn btn-primary",disabled:T.value},u(T.value?"Saving...":V.value==="create"?"Add Project":"Save Changes"),9,Xt)])],32)])])])):h("",!0)]))]))}});export{ns as default};
